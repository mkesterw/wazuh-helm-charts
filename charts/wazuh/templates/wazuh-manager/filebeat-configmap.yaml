{{- if or .Values.wazuhManager.master.enabled .Values.wazuhManager.worker.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "wazuh.fullname" . }}-filebeat-config
  namespace: {{ .Values.global.namespace }}
  labels:
    {{- include "wazuh.labels" . | nindent 4 }}
    app: wazuh-manager
data:
  filebeat.yml: |
    # Desabilitar Filebeat 7.10.2 bundled - usar apenas filebeat-8x sidecar
    filebeat.inputs:
      - type: log
        enabled: false
        paths:
          - /var/ossec/logs/alerts/alerts.json

    setup.template.enabled: false
    setup.ilm.enabled: false
    logging.level: error

    output.elasticsearch:
      hosts: ["https://wazuh-indexer:9200"]
      enabled: false
{{- end }}
