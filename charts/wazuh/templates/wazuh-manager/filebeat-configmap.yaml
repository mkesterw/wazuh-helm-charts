{{- if or .Values.wazuhManager.master.enabled .Values.wazuhManager.worker.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "wazuh.fullname" . }}-filebeat-config
  namespace: {{ .Values.global.namespace }}
  labels:
    {{- include "wazuh.labels" . | nindent 4 }}
    app: wazuh-manager
data:
  filebeat.yml: |
    # Desabilitar Filebeat 7.10.2 bundled - manter inputs vazios
    # O Filebeat 8.x sidecar fará todo o trabalho de coleta e envio
    filebeat.inputs: []

    setup.template.enabled: false
    setup.ilm.enabled: false
    logging.level: error

    # Output necessário para Filebeat iniciar, mesmo que desabilitado
    output.elasticsearch:
      hosts: ["https://localhost:9200"]
      username: "admin"
      password: "admin"
{{- end }}
