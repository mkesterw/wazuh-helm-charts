# Valores padrão para o Wazuh Helm Chart

## Configurações globais
global:
  namespace: wazuh
  storageClass: ""
  imageRegistry: docker.io
  imagePullPolicy: IfNotPresent
  imagePullSecrets: []

## Cert-Manager Configuration
## Se você não tem cert-manager instalado, instale com:
## kubectl apply -f https://github.com/cert-manager/cert-manager/releases/download/v1.14.4/cert-manager.yaml
cert-manager:
  enabled: false  # Set to true if you want to deploy cert-manager with this chart
  installCRDs: true

## Certificates Configuration
## Gera certificados TLS automaticamente usando cert-manager
certificates:
  enabled: true
  duration: 2160h # 90 dias
  renewBefore: 360h # 15 dias
  issuer:
    name: wazuh-selfsigned-issuer
    kind: Issuer
  subject:
    organization: Wazuh
    country: US
    locality: California

# Configurações do Wazuh Manager
wazuhManager:
  master:
    enabled: true
    replicaCount: 1
    
    image:
      repository: wazuh/wazuh-manager
      tag: "4.9.1"
      pullPolicy: IfNotPresent
    
    resources:
      limits:
        cpu: 400m
        memory: 512Mi
      requests:
        cpu: 200m
        memory: 256Mi
    
    persistence:
      enabled: true
      size: 10Gi
      storageClass: ""
      accessModes:
        - ReadWriteOnce
    
    securityContext:
      fsGroup: 101
      capabilities:
        add: ["SYS_CHROOT"]
    
    nodeSelector: {}
    tolerations: []
    affinity: {}
  
  worker:
    enabled: false  # Desabilitado por padrão para ambientes pequenos
    replicaCount: 2
    
    image:
      repository: wazuh/wazuh-manager
      tag: "4.9.1"
      pullPolicy: IfNotPresent
    
    resources:
      limits:
        cpu: 400m
        memory: 512Mi
      requests:
        cpu: 200m
        memory: 256Mi
    
    persistence:
      enabled: true
      size: 10Gi
      storageClass: ""
      accessModes:
        - ReadWriteOnce
    
    securityContext:
      fsGroup: 101
      capabilities:
        add: ["SYS_CHROOT"]
    
    antiAffinity: soft
    nodeSelector: {}
    tolerations: []
  
  service:
    api:
      type: ClusterIP
      port: 55000
      annotations: {}
    registration:
      type: ClusterIP
      port: 1515
      annotations: {}
    events:
      type: ClusterIP
      port: 1514
      annotations: {}
    cluster:
      type: ClusterIP
      port: 1516
      clusterIP: None

# Configurações do Wazuh Indexer
wazuhIndexer:
  enabled: true
  replicaCount: 1  # Para produção, use 3
  
  image:
    repository: wazuh/wazuh-indexer
    tag: "4.9.1"
    pullPolicy: IfNotPresent
  
  resources:
    limits:
      cpu: 500m
      memory: 1564Mi
    requests:
      cpu: 250m
      memory: 1Gi
  
  persistence:
    enabled: true
    size: 50Gi
    storageClass: ""
    accessModes:
      - ReadWriteOnce
  
  javaOpts: "-Xms1g -Xmx1g -Dlog4j2.formatMsgNoLookups=true"
  
  cluster:
    initialClusterManagerNodes: "wazuh-indexer-0"
    seedHosts: "wazuh-indexer-0.wazuh-indexer"
    maxLocalStorageNodes: 1
  
  securityContext:
    fsGroup: 1000
    privileged: true
  
  service:
    type: ClusterIP
    ports:
      rest: 9200
      nodes: 9300
    clusterIP: None
  
  nodeSelector: {}
  tolerations: []
  affinity: {}
  networkPolicy:
    enabled: false

# Configurações do Wazuh Dashboard
wazuhDashboard:
  enabled: true
  replicaCount: 1
  
  image:
    repository: wazuh/wazuh-dashboard
    tag: "4.9.1"
    pullPolicy: IfNotPresent
  
  resources:
    limits:
      cpu: 500m
      memory: 1Gi
    requests:
      cpu: 250m
      memory: 512Mi
  
  service:
    type: NodePort
    port: 443
    annotations: {}
  
  ingress:
    enabled: false
    className: nginx
    annotations: {}
    hosts:
      - host: wazuh.example.com
        paths:
          - path: /
            pathType: Prefix
    tls: []
  
  env:
    opensearchHosts: "https://wazuh-indexer:9200"
    serverSslEnabled: "true"
    wazuhApiUrl: "https://wazuh-api:55000"
  
  nodeSelector: {}
  tolerations: []
  affinity: {}
  networkPolicy:
    enabled: false

# Configurações de Secrets
secrets:
  indexer:
    username: "admin"
    password: "SecurePassword123!"
  
  dashboard:
    username: "kibanaserver"
    password: "kibanaserver"
  
  wazuhApi:
    username: "wazuh-wui"
    password: "MyS3cr37P450r.*-"
  
  authdPass: "please_change_me"

# Network Policies
networkPolicies:
  enabled: false

# RBAC configuration
rbac:
  create: true

# Service Account
serviceAccount:
  create: true
  annotations: {}
  name: ""

# Pod Security Policy
podSecurityPolicy:
  enabled: false